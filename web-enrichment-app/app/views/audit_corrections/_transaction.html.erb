<%# app/views/audit_corrections/_transaction.html.erb %>
<div id="<%= dom_id(transaction) %>" 
     style="background: white; border: 1px solid #e2e8f0; border-radius: 12px; padding: 20px; display: flex; flex-direction: column; box-shadow: 0 1px 3px rgba(0,0,0,0.05); transition: transform 0.2s; min-height: 220px;">
  
  <%# Parte superior: ID y Monto %>
  <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 12px;">
    <span style="font-size: 0.75rem; font-family: monospace; color: #94a3b8; background: #f8fafc; padding: 4px 8px; border-radius: 6px; border: 1px solid #f1f5f9;">
      ID: <%= transaction.event_id.last(10) %>
    </span>
    <span style="font-weight: 800; color: #0f172a; font-size: 1.2rem;">
      <%= number_to_currency(transaction.monto) %>
    </span>
  </div>

  <%# Cuerpo: Detalles y Fecha %>
  <div style="margin-bottom: 16px;">
    <div style="font-weight: 600; color: #1e293b; font-size: 1rem; line-height: 1.4; margin-bottom: 4px;">
      <%= transaction.detalles %>
    </div>
    <div style="font-size: 0.85rem; color: #64748b; display: flex; align-items: center; gap: 4px;">
      <span>ğŸ“…</span> <%= transaction.fecha.strftime("%d %b, %Y") %>
    </div>
  </div>

  <%# Badges de CategorizaciÃ³n %>
  <div style="display: flex; flex-wrap: wrap; gap: 8px; margin-bottom: 20px;">
    <span style="background: #e0f2fe; color: #0369a1; font-size: 0.7rem; padding: 4px 10px; border-radius: 20px; font-weight: 700; text-transform: uppercase; border: 1px solid #bae6fd;">
      <%= transaction.categoria %>
    </span>
    <span style="background: #f1f5f9; color: #475569; font-size: 0.7rem; padding: 4px 10px; border-radius: 20px; font-weight: 500; border: 1px solid #e2e8f0;">
      <%= transaction.sub_categoria %>
    </span>
    <span style="background: #fef3c7; color: #92400e; font-size: 0.7rem; padding: 4px 10px; border-radius: 20px; font-weight: 600; border: 1px solid #fde68a;">
      <%= Transaction::SENTIMIENTOS[transaction.sentimiento] || transaction.sentimiento %>
    </span>
  </div>

  <%# Pie: BotÃ³n de AcciÃ³n centrado y controlado %>
  <div style="margin-top: auto; padding-top: 16px; border-top: 1px dashed #e2e8f0; display: flex; justify-content: center;">
    <%= link_to edit_audit_correction_path(transaction, format: :turbo_stream), 
        data: { turbo_prefetch: false }, 
        style: "width: fit-content; min-width: 160px; text-align: center; background: #f1f5f9; color: #475569; padding: 8px 20px; border-radius: 8px; text-decoration: none; font-size: 0.85rem; font-weight: 700; transition: all 0.2s; border: 1px solid #cbd5e1; display: flex; align-items: center; justify-content: center; gap: 8px;",
        onmouseover: "this.style.background='#e2e8f0'; this.style.transform='translateY(-1px)';", 
        onmouseout: "this.style.background='#f1f5f9'; this.style.transform='translateY(0)';" do %>
      <span>âœï¸</span> Corregir Registro
    <% end %>
  </div>
</div>