<!DOCTYPE html>
<html>
  <head>
    <title>Audit-X 2026</title>
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <%= csrf_meta_tags %>
    <%= csp_meta_tag %>
    <%= stylesheet_link_tag "application", "data-turbo-track": "reload" %>
    <%= javascript_importmap_tags %>
  </head>

  <body style="margin: 0; background: #f8fafc; font-family: system-ui, sans-serif; display: flex; max-width: 100vw; overflow-x: hidden;">
    
    <!-- 1. SIDEBAR FIJO (260px) -->
    <nav style="width: 260px; height: 100vh; background: #1e293b; color: white; position: fixed; left: 0; top: 0; display: flex; flex-direction: column; z-index: 1000;">
      <div style="padding: 24px; font-size: 1.5rem; font-weight: bold; border-bottom: 1px solid #334155; display: flex; align-items: center; gap: 10px;">
        <span>ğŸ’°</span> Audit-X
      </div>

      <div style="flex: 1; padding: 20px 0;">
        <div style="padding: 0 24px 10px; font-size: 0.7rem; color: #94a3b8; text-transform: uppercase; letter-spacing: 0.05em;">Operaciones</div>
        <%= link_to transactions_path, class: "nav-link #{'active' if controller_name == 'transactions'}" do %>
          <span style="width: 24px;">ğŸ“‹</span> Pendientes
        <% end %>

        <div style="height: 20px;"></div>

        <div style="padding: 0 24px 10px; font-size: 0.7rem; color: #94a3b8; text-transform: uppercase; letter-spacing: 0.05em;">Inteligencia</div>
        <%= link_to category_rules_path, class: "nav-link #{'active' if controller_name == 'category_rules'}" do %>
          <span style="width: 24px;">âš™ï¸</span> Reglas de Motor
        <% end %>
        
        <div style="height: 20px;"></div>

        <div style="padding: 0 24px 10px; font-size: 0.7rem; color: #94a3b8; text-transform: uppercase; letter-spacing: 0.05em;">Sistema</div>
        <a href="#" class="nav-link" style="opacity: 0.5; cursor: not-allowed;">
          <span style="width: 24px;">ğŸ“¤</span> Importar CSV
        </a>
      </div>

      <div style="padding: 16px 24px; font-size: 0.75rem; color: #64748b; border-top: 1px solid #334155;">
        v1.2.0-2026
      </div>
    </nav>

    <!-- 2. AREA DE CONTENIDO (Ancho dinÃ¡mico) -->
    <main style="margin-left: 260px; width: calc(100% - 260px); min-height: 100vh; box-sizing: border-box; position: relative;">
      
      <!-- Contenedor de Notificaciones -->
      <div id="flash-container" style="position: fixed; top: 20px; left: calc(50% + 130px); transform: translateX(-50%); z-index: 9999; pointer-events: none;">
        <%= render "shared/flash" %>
      </div>

      <!-- Padding interno para que el contenido no toque los bordes -->
      <div style="padding: 40px; box-sizing: border-box;">
        <%= yield %>
      </div>
    </main>

    <style>
      .nav-link {
        display: flex;
        align-items: center;
        padding: 12px 24px;
        color: #cbd5e1;
        text-decoration: none;
        transition: all 0.2s;
        font-size: 0.95rem;
      }
      .nav-link:hover {
        background: #334155;
        color: white;
      }
      .nav-link.active {
        background: #3b82f6;
        color: white;
        border-right: 4px solid #fff;
      }
    </style>
  </body>
</html>
